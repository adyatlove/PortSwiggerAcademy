Откроем уязвимый ресурс

Перейдем во вкладку `live chat`

и даже напишем `hello`
![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/18.%20WebSockets/1.%20Manipulating%20WebSocket%20messages%20to%20exploit%20vulnerabilities/pics%20for%20walkthrough/1.png)

Откроем `Proxy` ->` WebSockets history` и увидим, что чат работает на вебсокетах, где каждое сообщение принимается или получается от сервера
```
{"message":"hello"}
```
![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/18.%20WebSockets/1.%20Manipulating%20WebSocket%20messages%20to%20exploit%20vulnerabilities/pics%20for%20walkthrough/2.png)


Нажмем `ПКМ` на данный запрос, и отправим его в `Repeater`

и изменим текст сообщения с `hello` на `<img src=1 onerror='alert(1)'>`

получив
```
{"message":"<img src=1 onerror='alert(1)'>"}
```
и получим уведомление об успешно выполненной лабораторной работе
![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/18.%20WebSockets/1.%20Manipulating%20WebSocket%20messages%20to%20exploit%20vulnerabilities/pics%20for%20walkthrough/3.png)

А вот если бы мы вписали этот пэйлоад в просто месседж на вебморде, получили бы следующее экранирование символов
```
{"message":"&lt;img src=1 onerror=&#39;alert(1)&#39;&gt;"}
```
и чтобы избежать данного экранирования нам пришлось отправлять через бурп
![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/18.%20WebSockets/1.%20Manipulating%20WebSocket%20messages%20to%20exploit%20vulnerabilities/pics%20for%20walkthrough/4.png)
